# Maintainer: Dmitry Dolgov <me@nyorf.com>
pkgname=urlcrazy
pkgver=0.7.3
pkgrel=6
pkgdesc="an OSINT tool to generate and test domain typos or variations to detect or perform typo squatting, URL hijacking, phishing, and corporate espionage."
arch=("x86_64")
url="https://github.com/urbanadventurer/urlcrazy"
license=("None")
groups=("mikoshi" "mikoshi-information-gathering" "mikoshi-dns-analysis")
depends=("rubygems" "ruby-reline" "ruby-irb" "ruby")
source=("$pkgname-$pkgver.tar.gz::https://github.com/urbanadventurer/$pkgname/archive/v$pkgver.tar.gz"
        "https://raw.githubusercontent.com/nyorf/PKGBUILDs/master/$pkgname/$pkgname")
md5sums=("70399a7f2746db5f47153ca373ef738c"
         "463f760f63c06c6e76ef871041c8465a")
sha256sums=("b04745000e2c27fd85f7b6af98bdac81b7d1685da87267fc47adea0735a42b95"
            "56e5b7a0377336516648690ac264346333bab86c5f40b91ed7da47670409bac9")
sha512sums=("61a6a3785869130f2940e52dba606616c0592be69f0e25fd3eb6bce070e5ea2c25c97dcdc11b06d1b546a95a20e784bd5a3f9e65f179ec4a505380c06908de5b"
            "d37da1a6aa635163ecbc4a07a5a642388572ae8a7d54390c934c5bd3707d1db59e287b5c07c277cf4af0a951ac8cc734f9115e600cbe9705254f40ac7833b2c1")

package() {
    local _gemdir="$(gem env gemdir)"
    gem install --no-user-install -i "${pkgdir}/${_gemdir}" -n "${pkgdir}/usr/bin" json colorize async async-dns async-http
    find "$pkgdir" -name "gem_make.out" -delete
    install -Dm 755 "$srcdir/$pkgname" "$pkgdir/usr/bin/$pkgname"
    install -d "$pkgdir/usr/share/$pkgname"
    cp -r "$srcdir/$pkgname-$pkgver/." "$pkgdir/usr/share/$pkgname"
    install -D "$srcdir/$pkgname-$pkgver/README.md" "$pkgdir/usr/share/doc/$pkgname/README.md"
}
