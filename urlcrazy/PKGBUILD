# Maintainer: Dmitry Dolgov <me@nyorf.com>
pkgname=urlcrazy
pkgver=0.7.3
pkgrel=8
pkgdesc="an OSINT tool to generate and test domain typos or variations to detect or perform typo squatting, URL hijacking, phishing, and corporate espionage."
arch=("x86_64")
url="https://github.com/urbanadventurer/urlcrazy"
license=("custom")
groups=("mikoshi" "mikoshi-information-gathering" "mikoshi-dns-analysis")
depends=("rubygems" "ruby-reline" "ruby-irb" "ruby" "ruby-bundler")
source=("$pkgname-$pkgver.tar.gz::https://github.com/urbanadventurer/$pkgname/archive/v$pkgver.tar.gz"
        "https://raw.githubusercontent.com/nyorf/PKGBUILDs/master/$pkgname/$pkgname")
md5sums=("70399a7f2746db5f47153ca373ef738c"
         "34970809247dc26fdbc9f25e4459a224")
sha256sums=("b04745000e2c27fd85f7b6af98bdac81b7d1685da87267fc47adea0735a42b95"
            "a8d4fdd52ec8850147ddba8fd843db2427f0e1eb5ae146ace0e8c794100c62f8")
sha512sums=("61a6a3785869130f2940e52dba606616c0592be69f0e25fd3eb6bce070e5ea2c25c97dcdc11b06d1b546a95a20e784bd5a3f9e65f179ec4a505380c06908de5b"
            "5959258403d0e33d28cd0dbc78ff8b18045c2f7bc76acb2ed13214290883ffeb486300c69817aedf9dfdf09409c27a0cd4bf5f1773975035a1da4e460b52424a")

package() {
    cd "$pkgname-$pkgver"
    bundle config path 'vendor/bundle' --local
    bundle install
    install -Dm 755 "$srcdir/$pkgname" "$pkgdir/usr/bin/$pkgname"
    install -d "$pkgdir/usr/share/$pkgname"
    cp -r "$srcdir/$pkgname-$pkgver/." "$pkgdir/usr/share/$pkgname"
    install -D "$srcdir/$pkgname-$pkgver/README.md" "$pkgdir/usr/share/doc/$pkgname/README.md"
    find "$pkgdir" -name "gem_make.out" -delete
}
